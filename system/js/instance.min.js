"use strict";Theamus.Instance=function(){this.DefineDefaultVariables()},Theamus.Instance.prototype={constructor:Theamus.Instance,stop:function(){return this["continue"]=!1,!1},DefineDefaultVariables:function(){this.Feature="",this.Class="",this.Function="",this.Data={},this.Method="post",this.URL="",this.Async=!0,this["continue"]=!0,this.ID=0},CreateCompleteEvent:function(t){"function"==typeof this.complete&&this.complete(t)},CreateErrorEvent:function(t){"function"==typeof this.error&&this.error(t)},CreateSuccessEvent:function(t){"function"==typeof this.success&&this.success(t)},CheckVariable:function(t){return"undefined"==typeof t?this.stop():"string"!=typeof t?this.stop():""==typeof t?this.stop():!0},GatherSendData:function(){var t=document.getElementById("ajax-hash-data");(void 0===t||"object"!=typeof t)&&(console.error("Failed to find the AJAX hash information."),this.stop()),this.Data["ajax-hash-data"]=t.value,this.Data.ajax="instance",this.Data.instance_feature=this.Feature,this.Data.instance_class=this.Class,this.Data.instance_function=this.Function,this.Data.instance_id=this.ID,this.Data.instance_delete=0,this.Data.instance_delete_all=0,this.Data.instance_reference=0,this.Data.instance_reference_all=0},CreateFormData:function(){if("post"===this.Method){var t=new FormData;for(var e in this.Data)t.append(e,this.Data[e]);return t}if("get"===this.Method){var s=[];for(var e in this.Data)s.push(encodeURIComponent(e)+"="+encodeURIComponent(this.Data[e]));return s}},Send:function(t){if(!this.CheckVariable(this.URL))return console.error("No URL is defined to make a call."),this.stop();if(!this.CheckVariable(this.Method))return console.error("No call method is defined."),this.stop();if((void 0===typeof t||"boolean"!=typeof t)&&(t=!1),(this.Async!==!0||this.Async!==!1)&&(this.Async=!0),t||this.GatherSendData(),this["continue"]){var e=new XMLHttpRequest,s=this;e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){try{var t={};t.response={headers:e.getAllResponseHeaders(),status:e.status},t.success={data:JSON.parse(e.responseText)},t.error="error"in t.success.data&&1===t.success.data.error.status?t.success.data.error:{status:0,message:"",code:0}}catch(a){var t={},n="Data response error.",i=e.responseText.indexOf("<br />\n<b>Warning</b>:"),r=e.responseText.indexOf("<br />\n<b>Notice</b>:");if(i>-1||r>-1){n=e.responseText.replace(/(<([^>]+)>)/gi,"").replace(/\n/gi,"").replace(/<br>/gi,"");var o=n.indexOf("{");n=n.substr(0,o)}t.error={status:1,message:n,code:1},t.response={headers:e.getAllResponseHeaders,status:e.status},t.success={data:e.responseText}}s.CreateCompleteEvent(t),1===t.error.status?s.CreateErrorEvent(t.error):s.CreateSuccessEvent(t.success)}},"get"===this.Method&&(this.URL=this.URL+"?"+this.CreateFormData().join("&")),e.open(this.Method,this.URL,this.Async),"post"===this.Method?e.send(this.CreateFormData()):e.send()}},Delete:function(){this.GatherSendData(),this.Data.instance_delete=1,this.Send(!0)},DeleteAll:function(){this.GatherSendData(),this.Data.instance_delete_all=1,this.Send(!0)},Reference:function(){this.GatherSendData(),this.Data.instance_reference=1,this.Send(!0)},ReferenceAll:function(){this.GatherSendData(),this.Data.instance_reference_all=1,this.Send(!0)}};