Theamus.Style={cards:{raw:[],good:[],object:{}},locale:{possibleIDCharacters:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",cards:{query:"section[type='card']"}},loadCards:function(){this.findCards(),this.giveCardsIDs(),this.createCardObjects()},findCards:function(){var e=document.querySelectorAll(this.locale.cards.query);e.length<1||(this.cards.raw=e)},giveCardsIDs:function(){var e,t;for(e=0;e<this.cards.raw.length;e++)t=this.cards.raw[e],t.id||(t.id=this.makeID()),this.cards.good.push(t)},makeID:function(){var e,t="";for(e=0;10>e;e++)t+=this.locale.possibleIDCharacters.charAt(Math.floor(Math.random()*this.locale.possibleIDCharacters.length));return t},createCardObjects:function(){var e,t;for(e=0;e<this.cards.good.length;e++)t=this.cards.good[e],this.cards.object[t.id]=new Theamus.Style.Card(t)},getAllCards:function(){return this.cards.object},getCard:function(e){if(e){if(this.cards.object[e])return this.cards.object[e].card;console.error("There's no card existing with that ID.")}else console.error("Failed to get card because no card ID was given.")}},Theamus.Style.Card=function(e){this.card=e,this.defineHeader(),this.findInputs(),this.findCollapsibles(),this.handleContentCards(),this.giveIDs(),this.createObjects(),this.defineCardFunctions()},Theamus.Style.Card.prototype={constructor:Theamus.Style.Card,locale:{input:{query:["input","textarea","select"]},headerQuery:"header[type='card_header']",collapsibleQuery:"section[type='card_collapsible']",contentCardClass:"card_text-expansion",progressQuery:".card_progress-wrapper",notification:{element:"div","class":"alert",classPrefix:"alert-",icon:{"class":"glyphicon",element:"span",type:{success:"ion-checkmark-round",danger:"ion-close",warning:"ion-alert",info:"ion-information",spinner:"spinner spinner-fixed-size"}}}},defineHeader:function(){var e=this.card.querySelector(this.locale.headerQuery);null===e?this.header=null:this.card.header=e},defineCardFunctions:function(){this.card.getAllCollapsibles=this.getAllCollapsibles,this.card.getCollapsible=this.getCollapsible,this.card.isExpandable=this.isExpandable,this.card.hasContentExpansion=this.hasContentExpansion,this.card.expandContent=this.expandContent,this.card.addProgress=this.addProgress,this.card.getProgress=this.getProgress,this.card.progressQuery=this.locale.progressQuery,this.card.getAllInputs=this.getAllInputs,this.card.getInput=this.getInput,this.card.addNotification=this.addNotification,this.card.removeNotification=this.removeNotification,this.card.notification=this.locale.notification,this.card.notification.makeIcon=this.makeNotificationIcon,this.card.notification.create=this.createNotificationElement},giveIDs:function(){this.giveInputsIDs(),this.giveCollapsibleIDs()},createObjects:function(){this.createInputObjects(),this.createExpansionObject(),this.createCollapsibleObjects()},findInputs:function(){this.card.inputs={raw:[],object:{}},this.card.inputs.raw=this.card.querySelectorAll(this.locale.input.query.join(", "))},findCollapsibles:function(){this.card.collapsibles={raw:[],object:{}},this.card.collapsibles.raw=this.card.querySelectorAll(this.locale.collapsibleQuery)},giveInputsIDs:function(){var e,t;for(e=0;e<this.card.inputs.raw.length;e++)t=this.card.inputs.raw[e],t.id||(t.id=Theamus.Style.makeID())},giveCollapsibleIDs:function(){var e,t;for(e=0;e<this.card.collapsibles.raw.length;e++)t=this.card.collapsibles.raw[e],t.id||(t.id=Theamus.Style.makeID())},createInputObjects:function(){var e,t;for(e=0;e<this.card.inputs.raw.length;e++)t=this.card.inputs.raw[e],this.card.inputs.object[t.id]=new Theamus.Style.Card.Input(t)},getAllInputs:function(){return this.inputs.object},getInput:function(e){return e?this.inputs.object[e].input:!1},createExpansionObject:function(){this.card.expansion=new Theamus.Style.Card.Expansion(this.card)},createCollapsibleObjects:function(){var e,t;for(e=0;e<this.card.collapsibles.raw.length;e++)t=this.card.collapsibles.raw[e],this.card.collapsibles.object[t.id]=new Theamus.Style.Card.Collapsible(t)},getAllCollapsibles:function(){return this.collapsibles.object},getCollapsible:function(e){return this.collapsibles.object[e].collapsible},isExpandable:function(){return this.expansion.hasExpansion},handleContentCards:function(){this.card.classList.contains(this.locale.contentCardClass)&&(this.card.content=new Theamus.Style.Card.Content(this.card))},hasContentExpansion:function(){return this.content?this.content.hasExpansion:!1},addProgress:function(){this.progress=new Theamus.Style.Card.Progress(this)},addNotification:function(e,t){e&&""!==e&&t&&""!==t&&(this.notification.type=e,this.notification.message=t,this.notification.create(),this.insertBefore(this.notification.object,this.header.nextSibling))},createNotificationElement:function(){var e=document.createElement(this.element);e.classList.add(this["class"]),e.classList.add(this.classPrefix+this.type),this.object=e,this.makeIcon(),e.appendChild(document.createTextNode(this.message))},makeNotificationIcon:function(){var e=document.createElement(this.icon.element);e.classList.add(this.icon["class"]),e.classList.add(this.icon.type[this.type]),this.object.appendChild(e)},removeNotification:function(){this.removeChild(this.notification.object)}},Theamus.Style.Card.Expansion=function(e){return this.card=e,this.hasExpansion=!0,this.getExpansion()===!1?void(this.hasExpansion=!1):void(this.getHeader()!==!1&&this.createChevron())},Theamus.Style.Card.Expansion.prototype={constructor:Theamus.Style.Card.Expansion,locale:{expandedClass:"card_expanded",query:{expansion:"section[type='card_expansion']",header:"header[type='card_header']"},chevron:{element:"div",innerHTML:"<span class='glyphicon ion-chevron-down'></span>","class":"card_expander",flipClass:"chevron-flip"}},getExpansion:function(){var e=this.card.querySelector(this.locale.query.expansion);return e?void(this.expansion=e):!1},getHeader:function(){var e=this.card.querySelector(this.locale.query.header);return e?void(this.header=e):!1},createChevron:function(){var e=document.createElement(this.locale.chevron.element);e.innerHTML=this.locale.chevron.innerHTML,e.classList.add(this.locale.chevron["class"]),e.removeEventListener("click",function(){},!1),this.header.appendChild(e),this.chevron=e,this.addChevronListeners(),this.addChevronInformation()},addChevronInformation:function(){this.chevron.expand=this.chevronExpand,this.chevron.collapse=this.chevronCollapse,this.chevron.expansion=this.expansion,this.chevron.expandedClass=this.locale.expandedClass,this.chevron.flipClass=this.locale.chevron.flipClass},addChevronListeners:function(){this.chevron.addEventListener("click",this.chevronClick),this.expand=this.expandCard,this.collapse=this.collapseCard},chevronClick:function(){this.expansion.classList.contains(this.expandedClass)?this.collapse():this.expand()},chevronExpand:function(){this.expansion.classList.add(this.expandedClass),this.classList.add(this.flipClass)},chevronCollapse:function(){this.expansion.classList.remove(this.expandedClass),this.classList.remove(this.flipClass)},expandCard:function(){this.expansion.classList.add(this.locale.expandedClass),this.chevron.classList.add(this.locale.chevron.flipClass)},collapseCard:function(){this.expansion.classList.remove(this.locale.expandedClass),this.chevron.classList.remove(this.locale.chevron.flipClass)}},Theamus.Style.Card.Content=function(e){return this.hasExpansion=!0,this.card=e,this.content={},this.getContentWrapper()===!1?void(this.hasExpansion=!1):(this.createExpansion(),void this.defineContentVariables())},Theamus.Style.Card.Content.prototype={constructor:Theamus.Style.Card.Content,locale:{query:{expanded:".card_text-expansion-expanded",contentWrapper:".card_text-expansion-wrapper"},expandedClass:"card_text-expansion-expanded",expandedPadding:110,maxExpansionHeight:300,chevron:{elementType:"div","class":"card_text-expansion-hider",innerHTML:"<span class='glyphicon ion-chevron-down'></span>"}},defineContentVariables:function(){this.expand=this.manualExpand,this.collapse=this.manualCollapse},getContentWrapper:function(){var e=this.card.querySelector(this.locale.query.contentWrapper);return null===e?!1:(this.content.wrapper=e,!0)},createExpansion:function(){this.createChevron()},createChevron:function(){var e=document.createElement(this.locale.chevron.elementType);e.classList.add(this.locale.chevron["class"]),e.innerHTML=this.locale.chevron.innerHTML,this.content.chevron=e,this.addChevron()},addChevron:function(){this.content.wrapper.appendChild(this.content.chevron),this.setChevronListeners(),this.setChevronVariables()},setChevronVariables:function(){this.content.chevron.parent=this.card,this.content.chevron.expandedClass=this.locale.expandedClass,this.content.chevron.expandedPadding=this.locale.expandedPadding,this.content.chevron.maxExpansionHeight=this.locale.maxExpansionHeight,this.content.chevron.collapse=this.selfCollapse,this.content.chevron.expand=this.selfExpand},setChevronListeners:function(){this.content.chevron.removeEventListener("click",function(){},!1),this.content.chevron.addEventListener("click",this.chevronClick,!1)},chevronClick:function(e){e.preventDefault(),this.parent.classList.contains(this.expandedClass)?this.collapse():this.expand()},selfExpand:function(){this.parent.style.maxHeight=this.parentNode.offsetHeight+this.expandedPadding+"px",this.parent.classList.add(this.expandedClass)},selfCollapse:function(){this.parent.style.maxHeight=this.maxExpansionHeight+"px",this.parent.classList.remove(this.expandedClass)},manualExpand:function(){this.content.wrapper.parentNode.style.maxHeight=this.content.wrapper.offsetHeight+this.locale.expandedPadding+"px",this.content.wrapper.parentNode.classList.add(this.locale.expandedClass)},manualCollapse:function(){this.content.wrapper.parentNode.style.maxHeight=this.locale.maxExpansionHeight+"px",this.content.wrapper.parentNode.classList.remove(this.locale.expandedClass)}},Theamus.Style.Card.Input=function(e){this.input=e,this.input.label={},this.defineInputVariables(),this.checkInput()!==!1&&(this.getInputAttachments(),this.getLabelInformation(),this.createLabel()!==!1&&this.addInputEvents())},Theamus.Style.Card.Input.prototype={constructor:Theamus.Style.Card.Input,locale:{feedback:{elementType:"span","class":"glyphicon",types:["warn","success","info","danger"],warnClass:"ion-alert",successClass:"ion-checkmark",infoClass:"ion-information",dangerClass:"ion-close",parentClass:"feedback",prefix:"feedback-",query:".glyphicon",offsetDefault:20,offsetPadding:25},textInputs:["text","password","search","email","url","tel","number","textarea"],interactiveInputs:["checkbox","radio","range","date","color","select-one","select-multiple"],cleanClass:"input-clean",defaultInputType:"input",data:{labelText:"data-label",labelDirection:"data-labeldirection",labelAction:"data-labelaction"},defaults:{labelText:"",labelDirection:"left",labelAction:"slide"},label:{element:"label",slideLeftClass:"out-left",slideUpClass:"out-up",padding:15,inlineClassPrefix:"inline-",normal:{defaultClass:"label-normal",leftClass:"input_label-left",upClass:"input_label-up"}},attachmentClass:"input-attachment",attachmentOffsetDefault:21},checkInput:function(){return this.input.parentNode.classList.contains(this.locale.attachmentClass)?!1:void 0},defineInputVariables:function(){this.input.addFeedback=this.addFeedback,this.input.locale=this.locale,this.input.createFeedbackIcon=this.createFeedbackIcon,this.input.removeFeedback=this.removeFeedback},defineLabelDefaults:function(){this.input.label.startLeft=20,this.input.label.isClean=!1},getLabelInformation:function(){this.input.label.text=this.input.getAttribute(this.locale.data.labelText),this.input.label.direction=this.input.getAttribute(this.locale.data.labelDirection),this.input.label.action=this.input.getAttribute(this.locale.data.labelAction),this.cleanLabelInformation()},cleanLabelInformation:function(){this.input.label.text||(this.input.label.text=this.locale.defaults.labelText),this.input.label.direction||(this.input.label.direction=this.locale.defaults.labelDirection),this.input.label.action||(this.input.label.action=this.locale.defaults.labelAction),this.input.removeAttribute(this.locale.data.labelText),this.input.removeAttribute(this.locale.data.labelDirection),this.input.removeAttribute(this.locale.data.labelAction)},createLabel:function(){return""===this.input.label.text?!1:void(this.input.classList.contains(this.locale.cleanClass)?(this.input.label.isClean=!0,this.loadPlaceholder()):"none"===this.input.label.action?this.loadNormalLabel():this.locale.textInputs.indexOf(this.input.type)>-1?this.loadTextLabel():this.locale.interactiveInputs.indexOf(this.input.type)>-1?this.loadInteractiveLabel():console.error("Failed to create a label because the input type couldn't be identified for the input with an ID of "+this.input.tagName.toLowerCase()+"#"+this.input.id))},loadPlaceholder:function(){this.input.setAttribute("placeholder",this.input.label.text)},loadNormalLabel:function(){var e=document.createElement(this.locale.label.element);e.innerHTML=this.input.label.text,e.classList.add("left"===this.input.label.direction?this.locale.label.normal.leftClass:this.locale.label.normal.upClass),this.input.parentNode.insertBefore(e,this.input)},loadTextLabel:function(){this.defineLabelDefaults();var e=document.createElement(this.locale.label.element);e.innerHTML=this.input.label.text,e.setAttribute("for",this.input.id),e.style.left=this.getLabelStartLeft()+"px",this.input.parentNode.insertBefore(e,this.input),this.addLabelInformation(e)},loadInteractiveLabel:function(){var e=document.createElement(this.locale.label.element);e.classList.add(this.locale.label.normal.defaultClass),e.classList.add("left"===this.input.label.direction?this.locale.label.normal.leftClass:this.locale.label.normal.upClass),e.setAttribute("for",this.input.id),e.innerHTML=this.input.label.text,this.input.parentNode.insertBefore(e,this.input)},addLabelInformation:function(e){var t=this.getBoldedLabelWidth(e);this.input.label.element=e,this.input.label.info=this.locale.label,this.input.label.inputOffset=t+this.locale.label.padding,this.input.label.labelOffset=-1*t-(this.locale.label.padding-10)},getBoldedLabelWidth:function(e){var t=e.offsetWidth,s=e.getAttribute("style");return e.style.fontWeight="bold",t=e.offsetWidth,e.setAttribute("style",s),t},getInputAttachments:function(){var e,t,s=!0,a={before:[],after:[]},i=this.input.parentNode.children;for(e=0;e<i.length;e++)t=i[e],this.locale.textInputs.indexOf(t.type)>-1&&(s=!1),-1===this.locale.textInputs.indexOf(t.type)&&(s===!0?a.before.push(t):a.after.push(t));this.input.attachments=a},getLabelStartLeft:function(){return this.input.attachments.before.length>0&&(this.input.label.startLeft=this.input.attachments.before[0].offsetWidth+this.locale.attachmentOffsetDefault),this.input.label.startLeft},addInputEvents:function(){"none"===this.input.label.action||this.locale.interactiveInputs.indexOf(this.input.type)>-1||(this.input.removeEventListener("focus",function(){},!1),this.input.removeEventListener("blur",function(){},!1),this.input.addEventListener("focus",this.eventFocusInput),this.input.addEventListener("blur",this.eventBlurInput))},eventFocusInput:function(){this.label.isClean!==!0&&("disappear"===this.label.action?this.label.element.style.display="none":"left"===this.label.direction?(this.label.element.classList.add(this.label.info.slideLeftClass),this.label.element.style.left=this.label.labelOffset+"px",this.parentNode.setAttribute("style","width: calc(100% - "+this.label.inputOffset+"px);"),this.parentNode.style.left=this.label.inputOffset+"px"):"up"===this.label.direction&&(this.label.element.classList.add(this.label.info.slideUpClass),this.parentNode.classList.add(this.label.info.slideUpClass)))},eventBlurInput:function(){this.label.isClean!==!0&&""===this.value&&("disappear"===this.label.action?this.label.element.style.display="block":"left"===this.label.direction?(this.label.element.classList.remove(this.label.info.slideLeftClass),this.label.element.style.left=this.label.startLeft+"px",this.parentNode.removeAttribute("style")):"up"===this.label.direction&&(this.label.element.classList.remove(this.label.info.slideUpClass),this.parentNode.classList.remove(this.label.info.slideUpClass)))},addFeedback:function(e,t){this.feedbackType=e?e:"",this.feedbackMessage=t?t:"",-1!==this.locale.feedback.types.indexOf(e)&&(this.removeFeedback(),this.parentNode.classList.add(this.locale.feedback.parentClass),this.parentNode.classList.add(this.locale.feedback.prefix+e),this.createFeedbackIcon())},removeFeedback:function(){var e,t,s;for(this.parentNode.classList.remove(this.locale.feedback.parentClass),e=0;e<this.locale.feedback.types.length;e++)t=this.locale.feedback.types[e],this.parentNode.classList.remove(this.locale.feedback.prefix+t);s=this.parentNode.querySelector(this.locale.feedback.query),null!==s&&this.parentNode.removeChild(s)},createFeedbackIcon:function(){var e=document.createElement(this.locale.feedback.elementType);e.classList.add(this.locale.feedback["class"]),e.style.right=this.attachments.after.length>0?this.attachments.after[0].offsetWidth+this.locale.feedback.offsetPadding+"px":this.locale.feedback.offsetDefault+"px",""!==this.feedbackMessage&&(e.innerHTML="<span>"+this.feedbackMessage+"</span>"),"warn"===this.feedbackType&&e.classList.add(this.locale.feedback.warnClass),"success"===this.feedbackType&&e.classList.add(this.locale.feedback.successClass),"info"===this.feedbackType&&e.classList.add(this.locale.feedback.infoClass),"danger"===this.feedbackType&&e.classList.add(this.locale.feedback.dangerClass),this.parentNode.appendChild(e)}},Theamus.Style.Card.Progress=function(e){this.card=e,this.progress={},this.getProgressElement()!==!1&&this.createPercentage()},Theamus.Style.Card.Progress.prototype={constructor:Theamus.Style.Card.Progress,locale:{percentage:{elementType:"div","class":"card_progress-percentage",query:".card_progress-percentage"},progress:{query:".card_progress-wrapper",finished:"card_progress-finished"}},defineProgressVariables:function(){this.progress.updatePercentage=this.updatePercentage()},getProgressElement:function(){var e=this.card.querySelector(this.locale.progress.query);return null===e?(console.error("No progress element could be found to update."),!1):(this.progress.element=e,!0)},getPercentage:function(){this.findPercentage()||this.createPercentage()},findPercentage:function(){var e=this.card.querySelector(this.locale.percentage.query);return null===e?!1:(this.progress.percentage=e,e)},createPercentage:function(){var e=document.createElement(this.locale.percentage.elementType);e.classList.add(this.locale.percentage["class"]),this.progress.element.appendChild(e),this.progress.percentage=e,this.updatePercentage(0)},updatePercentage:function(e){e=e?parseInt(e):0,this.progress.percentage.number=e,100>e?this.changeProgress():this.finishProgress()},changeProgress:function(){this.progress.element.style.display="block",this.progress.element.style.width=this.progress.percentage.number+"%",this.progress.percentage.innerHTML=this.progress.percentage.number+"%"},finishProgress:function(){this.progress.element.style.width="100%",this.progress.percentage.innerHTML="100%",this.finishText&&(this.progress.element.innerHTML=this.finishText,this.progress.element.classList.add(this.locale.progress.finished))}};