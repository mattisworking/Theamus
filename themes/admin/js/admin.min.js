function admin_add_extras(){var e=$('[name="addscript"]'),t=$('[name="addstyle"]');for(var n=0;n<e.length;n++){add_js_file(e[n].value);$(e[n]).remove()}for(var n=0;n<t.length;n++){add_css(t[n].value);$(t[n]).remove()}}function admin_window_run_on_load(e){if(typeof window[e]==="function"){return window[e]()}else{setTimeout(function(){admin_window_run_on_load(e)},100)}}function create_admin_window(e,t,n){if($("#"+e).length>0){bring_admin_window_to_front($("#"+e).parentsUntil(".admin-windows"));return false}if(theamus.mobile===false){if($(".admin-navigation").hasClass("admin-navigation-left")){$(".admin-navigation").addClass("admin-navigation-open-"+admin_position)}else{$(".admin-navigation").addClass("admin-navigation-open-"+admin_position)}}var r=document.createElement("div");$(r).addClass("admin-window");$(r).addClass("admin-window-init");if(theamus.mobile===true){$(r).addClass("admin-window-mobile")}var i=document.createElement("div");$(i).addClass("window-chrome");$(i).html("<span class='title' title='"+t+"'>"+t+"</span>");$(i).append("<span class='close close-admin-window'><a href='#' title='Close Window'><span class='ion-close'></span></a></span>");$(i).append("<span class='refresh refresh-admin-window' data-url='"+n+"'><a href='#' title='Refresh Window'><span class='ion-refresh'></span></a></span>");$(r).append(i);var s=document.createElement("div");$(s).addClass("window-content");$(s).attr("id",e);$(r).append(s);$(".admin-windows").append(r);setTimeout(function(){$(r).addClass("admin-window-open");admin_window_listeners();update_admin_window_content(e,n)},200)}function admin_window_loading(e){$("#"+e).html("<span class='spinner spinner-fixed admin-window-spinner'></span>")}function update_admin_window_content(e,t){$(".admin").addClass("admin-panel-open");$("#"+e).parentsUntil(".admin-windows").removeClass("admin-window-maxheight");bring_admin_window_to_front($("#"+e).parentsUntil(".admin-windows"));admin_window_loading(e);setTimeout(function(){theamus.ajax.run({url:theamus.base_url+t,type:"include",result:e,after:function(){$("#"+e).children(".refresh").attr("data-url",t);admin_add_extras();resize_admin_window();if(resize!==null){resize=setInterval(resize_admin_window,500);setTimeout(function(){clearInterval(resize);resize=null},1e4)}}})},500)}function resize_admin_window(){for(var e=0;e<$(".admin-window").length;e++){var t=$(".admin-window")[e];if($(t).height()>$(window).height()&&theamus.mobile===false){$(t).addClass("admin-window-maxheight")}}}function change_admin_window_title(e,t){var n=$($("#"+e).siblings()[0]).children(".title");n.attr("title",t);n.html(t)}function bring_admin_window_to_front(e){for(var t=0;t<$(".admin-window").length;t++){if($(".admin-window")[t]!==e){$($(".admin-window")[t]).css("z-index",false)}}$(e).css("z-index","10")}function admin_window_listeners(){if(theamus.mobile===false){$(".admin-window").draggable({handle:".window-chrome",cancel:".close",containment:"window",drag:function(){$(this).removeClass("admin-window-init")}})}$(".close-admin-window").click(function(e){e.preventDefault();var t=$(this);t.parentsUntil(".admin-windows").addClass("admin-window-closing");setTimeout(function(){t.parentsUntil(".admin-windows").remove();if($(".admin-window").length===0){$(".admin").removeClass("admin-panel-open")}},1e3)});$(".refresh-admin-window").click(function(e){e.preventDefault();var t=$($(this).parent().siblings(".window-content")[0]).attr("id");update_admin_window_content(t,$(this).attr("data-url"))});$(".admin-window").click(function(e){bring_admin_window_to_front(this)})}function switch_position_text(){$('[name="admin-move"]').html(admin_position==="left"?">>>":"<<<")}$(document).ready(function(){if(localStorage.getItem("admin_position")===null){admin_position="left";localStorage.setItem("admin_position","left")}else{admin_position=localStorage.getItem("admin_position")}if(admin_position!=="left"&&admin_position!=="right"){admin_position="left";localStorage.setItem("admin_position","left")}$(".admin-header").addClass("admin-header-"+admin_position);$(".admin-navigation").addClass("admin-navigation-"+admin_position);resize=null;add_css("themes/admin/style/css/admin.css");if(theamus.mobile===true){$(".admin").addClass("admin-mobile")}$("#ad_open-nav").click(function(e){e.preventDefault();$(".admin-navigation").toggleClass("admin-navigation-open");if($(".admin-navigation").hasClass("admin-navigation-"+admin_position)){$(".admin-navigation").toggleClass("admin-navigation-open-"+admin_position)}else{$(".admin-navigation").toggleClass("admin-navigation-open-"+admin_position)}if($(".admin-navigation").hasClass("admin-navigation-open")){$(".admin-header").addClass("admin-header-on");$(".admin").addClass("admin-panel-open");for(var t=0;t<$(".admin-window").length;t++){$($(".admin-window")[t]).addClass("admin-window-open")}}else{$(".admin-header").removeClass("admin-header-on");$(".admin").removeClass("admin-panel-open");for(var t=0;t<$(".admin-window").length;t++){$($(".admin-window")[t]).removeClass("admin-window-open")}}});$('[name="admin-nav-item"]').click(function(e){e.preventDefault();if(theamus.mobile===true){$(".admin-navigation").removeClass("admin-navigation-open");$(".admin-navigation").removeClass("admin-navigation-open-left");$(".admin-navigation").removeClass("admin-navigation-open-right")}var t=$(this).attr("data-title"),n=$(this).attr("data-id"),r=$(this).attr("data-url");create_admin_window(n,t,r);for(var i=0;i<$(".admin-window").length;i++){if(theamus.mobile===false){var s=$($(".admin-window")[i]).position(),o=200+20*i,u=10+20*i;if(s.left===o&&s.top===u){$("#"+n).parentsUntil(".admin-windows").css({left:o+20+"px",top:u+20+"px"})}}}});$('[name="admin-move"]').click(function(e){e.preventDefault();$(".admin-header").removeClass("admin-header-"+admin_position);$(".admin-navigation").removeClass("admin-navigation-"+admin_position);$(".admin-navigation").removeClass("admin-navigation-open-"+admin_position);var t=admin_position==="left"?"right":"left";$(".admin-header").addClass("admin-header-"+t);$(".admin-navigation").addClass("admin-navigation-"+t);$(".admin-navigation").addClass("admin-navigation-open-"+t);localStorage.setItem("admin_position",t);admin_position=t;switch_position_text()});switch_position_text();setTimeout(function(){$(".admin").removeAttr("style");$(".admin").addClass("admin-on")},200)})