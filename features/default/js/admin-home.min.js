function save_home_listen(){$('#save-home-form').submit(function(e){e.preventDefault();var t=$('[name="homeapp"]'),n=[];for(var r=0;r<t.length;r++)n.push(t[r].id+'='+(t[r].checked?1:0));Theamus.Ajax.api({type:'post',url:Theamus.base_url+'/default/',method:['DefaultAdmin','save_home_apps'],data:{custom:{apps:n.join(',')}},success:function(e){$('#home-result').show();if(e.error.status===1){$('#home-result').html(Theamus.Notify('danger',e.error.message))}else if(e.response.data!==true){$('#home-result').html(Theamus.Notify('success',e.response.data))}setTimeout(function(){$('#home-result').html('').hide()},1500)}})});return}function update_order(e){var t,n,r,i;t=$('#'+e).children();for(n=0;n<t.length;n++){r=t[n];i=r.id.split('=');r.id=i[0]+'='+(n+1)}return false}function get_column_positions(e){var t,n,r=new Array;t=$('#'+e).children();for(n=0;n<t.length;n++){r.push(t[n].id)}return r.join(',')}function get_app_positions(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=get_column_positions(e[n]);return t}function save_app_positions(){update_order('column1');update_order('column2');Theamus.Ajax.api({type:'post',url:Theamus.base_url+'/default/',method:['DefaultAdmin','save_app_positions'],data:{custom:get_app_positions(['column1','column2'])},success:function(e){$('#home-result').show();if(e.error.status===1){$('#home-result').html(Theamus.Notify('danger',e.error.message))}else if(e.response.data!==true){$('#home-result').html(Theamus.Notify('success',e.response.data))}setTimeout(function(){$('#home-result').html('').hide()},1500)}});return}function enable_sort(){if(typeof $('.col-half').sortable==='function'){$('.col-half').sortable({connectWith:'.col-half',placeholder:'sortable-placeholder',handle:'.handle',stop:function(e,t){save_app_positions()}}).disableSelection()}else{setTimeout(enable_sort,1e3)}}function update_apps(){Theamus.Ajax.api({type:'get',url:Theamus.base_url+'/default/',method:['DefaultAdmin','update_apps'],success:function(e){if(e.error.status===1){$('#home-result').html(Theamus.Notify('danger',e.error.message))}else if(e.response.data!==true){$('#home-result').html(Theamus.Notify('success',e.response.data))}}});return}function change_admin_tab(){$('[name="admin-tab"]').click(function(e){e.preventDefault();update_admin_window_content('theamus-dashboard',$(this).attr('data-file'));change_admin_window_title('theamus-dashboard',$(this).attr('data-title'))})}