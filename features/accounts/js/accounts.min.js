function login(){$("#login-form").submit(function(e){e.preventDefault();Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/accounts/",method:["Accounts","login"],data:{form:$("#login-form")},success:function(e){if(e.error.status===1){$("#login-result").html(Theamus.Notify("danger",e.error.message))}else if(e.response.data===true){window.location=$("#redirect_url").val()}}})})}function change_glyph(e,t,n){$("#"+e+" .glyphicon").removeClass("ion-checkmark");$("#"+e+" .glyphicon").removeClass("ion-close");$("#"+e+" .glyphicon").attr("title",n);if(t!==false)$("#"+e+" .glyphicon").addClass(t)}function register(){$("#username").keyup(function(){if($(this).val()==="")change_glyph("username-group",false,"");else{Theamus.Ajax.api({type:"get",method:["Accounts","check_username"],url:Theamus.base_url+"/accounts/",data:{custom:{username:$(this).val()}},success:function(e){if(e.error.status===1){change_glyph("username-group","ion-close",e.error.message)}else{change_glyph("username-group","ion-checkmark","")}}})}});$("#password").keyup(function(){if($(this).val()==="")change_glyph("password-group",false,"");else{Theamus.Ajax.api({type:"get",method:["Accounts","check_password"],url:Theamus.base_url+"/accounts/",data:{custom:{password:$(this).val()}},success:function(e){if(e.error.status===1){change_glyph("password-group","ion-close",e.error.message)}else{change_glyph("password-group","ion-checkmark","")}}})}});$("#password-again").keyup(function(){if($(this).val()===""){change_glyph("password-repeat-group",false,"")}else if($(this).val()!==$("#password").val()){change_glyph("password-repeat-group","ion-close","The passwords do not match.")}else if($(this).val()===$("#password").val()){change_glyph("password-repeat-group","ion-checkmark","")}});$("#email").keyup(function(){if($(this).val()==="")change_glyph("email-group",false,"");else{Theamus.Ajax.api({type:"get",method:["Accounts","check_email"],url:Theamus.base_url+"/accounts/",data:{custom:{email:$(this).val()}},success:function(e){if(e.error.status===1){change_glyph("email-group","ion-close",e.error.message)}else{change_glyph("email-group","ion-checkmark","")}}})}});$("#register-form").submit(function(e){e.preventDefault();$("#register-result").html(Theamus.Notify("spinner","Registering..."));Theamus.Ajax.api({type:"post",method:["Accounts","register_user"],url:Theamus.base_url+"/accounts/",data:{form:$("#register-form")},success:function(e){var t=$("#register-btn");t.attr("disabled",true);if(e.error.status===1){$("#register-result").html(Theamus.Notify("danger",e.error.message));t.attr("disabled",false)}else if(e.response.data===true){$("#register-result").html(Theamus.Notify("success","The account registration was successfull.  Check your email for an activation code!"))}else{t.attr("disabled",false);$("#register-result").html(Theamus.Notify("success",e.response.data))}}})})}function edit_account(){$("#change-password").click(function(){this.checked===true?$("#passwords").show():$("#passwords").hide()});$("#remove-picture").click(function(e){e.preventDefault();$("#user-result").html(Theamus.Notify("spinner","Removing..."));scroll_top();Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","remove_user_picture"],success:function(e){if(e.error.status===1){$("#user-result").html(Theamus.Notify("danger",e.error.message))}else if(e.response.data===true){$("#user-result").html(Theamus.Notify("success","Account picture removed."));setTimeout(function(){window.location.reload()},2500)}}})});$("#user-form").submit(function(e){e.preventDefault();$("#user-result").html(Theamus.Notify("spinner","Saving..."));scroll_top();Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","save_current_account"],data:{form:this},success:function(e){$("#user-result").show();if(e.error.status===1){$("#user-result").html(Theamus.Notify("danger",e.error.message))}else if(e.response.data===true){$("#user-result").html(Theamus.Notify("success","Account information saved."));setTimeout(function(){$("#user-result").html("").hide()},2500)}}});return})}function edit_personal(){$("#user-form").submit(function(e){e.preventDefault();$("#user-result").html(Theamus.Notify("spinner","Saving..."));scroll_top();Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","save_current_personal"],data:{form:this},success:function(e){$("#user-result").show();if(e.error.status===1){$("#user-result").html(Theamus.Notify("danger",e.error.message))}else if(e.response.data===true){$("#user-result").html(Theamus.Notify("success","Account information saved."));setTimeout(function(){$("#user-result").html("").hide()},2500)}}});return})}function edit_contact(){$("#user-form").submit(function(e){e.preventDefault();$("#user-result").html(Theamus.Notify("spinner","Saving..."));scroll_top();Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","save_current_contact"],data:{form:this},success:function(e){$("#user-result").show();if(e.error.status===1){$("#user-result").html(Theamus.Notify("danger",e.error.message))}else if(e.response.data===true){$("#user-result").html(Theamus.Notify("success","Account information saved."));setTimeout(function(){$("#user-result").html("").hide()},2500)}}});return false})}