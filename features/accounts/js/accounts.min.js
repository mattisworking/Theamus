function login(){$("#login-form").submit(function(e){e.preventDefault(),Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/accounts/",method:["Accounts","login"],data:{form:$("#login-form")},success:function(e){1===e.error.status?$("#login-result").html(Theamus.Notify("danger",e.error.message)):e.response.data===!0&&(window.location=$("#redirect_url").val())}})})}function change_glyph(e,s,t){$("#"+e+" .glyphicon").removeClass("ion-checkmark"),$("#"+e+" .glyphicon").removeClass("ion-close"),$("#"+e+" .glyphicon").attr("title",t),s!==!1&&$("#"+e+" .glyphicon").addClass(s)}function register(){$("#username").keyup(function(){""===$(this).val()?change_glyph("username-group",!1,""):Theamus.Ajax.api({type:"get",method:["Accounts","check_username"],url:Theamus.base_url+"/accounts/",data:{custom:{username:$(this).val()}},success:function(e){1===e.error.status?change_glyph("username-group","ion-close",e.error.message):change_glyph("username-group","ion-checkmark","")}})}),$("#password").keyup(function(){""===$(this).val()?change_glyph("password-group",!1,""):Theamus.Ajax.api({type:"get",method:["Accounts","check_password"],url:Theamus.base_url+"/accounts/",data:{custom:{password:$(this).val()}},success:function(e){1===e.error.status?change_glyph("password-group","ion-close",e.error.message):change_glyph("password-group","ion-checkmark","")}})}),$("#password-again").keyup(function(){""===$(this).val()?change_glyph("password-repeat-group",!1,""):$(this).val()!==$("#password").val()?change_glyph("password-repeat-group","ion-close","The passwords do not match."):$(this).val()===$("#password").val()&&change_glyph("password-repeat-group","ion-checkmark","")}),$("#email").keyup(function(){""===$(this).val()?change_glyph("email-group",!1,""):Theamus.Ajax.api({type:"get",method:["Accounts","check_email"],url:Theamus.base_url+"/accounts/",data:{custom:{email:$(this).val()}},success:function(e){1===e.error.status?change_glyph("email-group","ion-close",e.error.message):change_glyph("email-group","ion-checkmark","")}})}),$("#register-form").submit(function(e){e.preventDefault(),$("#register-result").html(Theamus.Notify("spinner","Registering...")),Theamus.Ajax.api({type:"post",method:["Accounts","register_user"],url:Theamus.base_url+"/accounts/",data:{form:$("#register-form")},success:function(e){var s=$("#register-btn");s.attr("disabled",!0),1===e.error.status?($("#register-result").html(Theamus.Notify("danger",e.error.message)),s.attr("disabled",!1)):e.response.data===!0?$("#register-result").html(Theamus.Notify("success","The account registration was successfull.  Check your email for an activation code!")):(s.attr("disabled",!1),$("#register-result").html(Theamus.Notify("success",e.response.data)))}})})}function edit_account(){$("#change-password").click(function(){this.checked===!0?$("#passwords").show():$("#passwords").hide()}),$("#remove-picture").click(function(e){e.preventDefault(),$("#user-result").html(Theamus.Notify("spinner","Removing...")),scroll_top(),Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","remove_user_picture"],success:function(e){1===e.error.status?$("#user-result").html(Theamus.Notify("danger",e.error.message)):e.response.data===!0&&($("#user-result").html(Theamus.Notify("success","Account picture removed.")),setTimeout(function(){window.location.reload()},2500))}})}),$("#user-form").submit(function(e){e.preventDefault(),$("#user-result").html(Theamus.Notify("spinner","Saving...")),scroll_top(),Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","save_current_account"],data:{form:this},success:function(e){$("#user-result").show(),1===e.error.status?$("#user-result").html(Theamus.Notify("danger",e.error.message)):e.response.data===!0&&($("#user-result").html(Theamus.Notify("success","Account information saved.")),setTimeout(function(){$("#user-result").html("").hide()},2500))}})})}function edit_personal(){$("#user-form").submit(function(e){e.preventDefault(),$("#user-result").html(Theamus.Notify("spinner","Saving...")),scroll_top(),Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","save_current_personal"],data:{form:this},success:function(e){$("#user-result").show(),1===e.error.status?$("#user-result").html(Theamus.Notify("danger",e.error.message)):e.response.data===!0&&($("#user-result").html(Theamus.Notify("success","Account information saved.")),setTimeout(function(){$("#user-result").html("").hide()},2500))}})})}function edit_contact(){$("#user-form").submit(function(e){return e.preventDefault(),$("#user-result").html(Theamus.Notify("spinner","Saving...")),scroll_top(),Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","save_current_contact"],data:{form:this},success:function(e){$("#user-result").show(),1===e.error.status?$("#user-result").html(Theamus.Notify("danger",e.error.message)):e.response.data===!0&&($("#user-result").html(Theamus.Notify("success","Account information saved.")),setTimeout(function(){$("#user-result").html("").hide()},2500))}}),!1})}function send_password_reset(){document.getElementById("send_password_reset-form").addEventListener("submit",function(e){e.preventDefault();var s=Theamus.Style.getCard("reset_code").querySelectorAll(".alert");if(s.length>0)for(var t=0;t<s.length;t++)Theamus.Style.getCard("password_reset").removeNotification();Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/accounts",method:["Accounts","send_password_reset"],data:{form:this},success:function(e){return console.log(e),1===e.error.status?void Theamus.Style.getCard("reset_code").addNotification("danger",e.error.message):(Theamus.Style.getCard("reset_code").querySelector("button[type='submit']").setAttribute("disabled",!0),document.getElementById("send_password_reset-form").removeEventListener("submit",function(){},!0),document.getElementById("send_password_reset-form").addEventListener("submit",function(e){e.preventDefault()}),Theamus.Style.getCard("reset_code").addNotification("success",e.response.data.message),void reset_password_listen(e.response.data.username,e.response.data.email,e.response.data.from_file))}})})}function reset_password_listen(e,s,t){Theamus.Style.getCard("password_reset").style.visibility="visible",Theamus.Style.getCard("password_reset").style.height="auto",1==t&&(Theamus.Style.getCard("password_reset").querySelector(".accounts_reset-from-file").style.display="block",Theamus.Style.getCard("password_reset").querySelector("#accounts_reset-from-file-split").style.display="block"),Theamus.Style.getCard("password_reset").querySelector("form").addEventListener("submit",function(r){r.preventDefault(),Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts",method:["Accounts","reset_password"],data:{form:this,custom:{username:e,email:s,from_file:t}},success:function(e){return 1===e.error.status?void Theamus.Style.getCard("password_reset").addNotification("danger",e.error.message):void(window.location=Theamus.base_url+"/accounts/login/reset/")}})})}