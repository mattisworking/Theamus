function accounts_next_page(e){if(e===undefined||e%1!==0)e=1;Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/accounts/",method:["Accounts","get_user_accounts_list"],data:{custom:{page:e}},success:function(e){if(e.error.status===1){$("#accounts-list").html(Theamus.Notify("danger",e.error.message))}else{$("#accounts-list").html(e.response.data)}}});return}function add_account_listeners(){$('[name="edit-account-link"]').click(function(e){e.preventDefault();update_admin_window_content("theamus-accounts","/accounts/admin/edit-account/"+$(this).attr("data-id"));change_admin_window_title("theamus-accounts","Edit User Account")});$('[name="remove-account-link"]').click(function(e){e.preventDefault();update_admin_window_content("theamus-accounts","/accounts/admin/remove-account/"+$(this).attr("data-id"));change_admin_window_title("theamus-accounts","Remove User Account")})}function change_accounts_tab(){$('[name="accounts-tab"]').click(function(e){e.preventDefault();update_admin_window_content("theamus-accounts",$(this).attr("data-file"));change_admin_window_title("theamus-accounts",$(this).attr("data-title"))})}function search_accounts_next_page(e){if(e===undefined||e%1!==0)e=1;Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/accounts/",method:["Accounts","search_accounts"],data:{form:$(".search-form"),custom:{page:e}},success:function(e){if(e.error.status===1){$("account-search-results").html(Theamus.Notify("danger",e.error.message))}else{$("#account-search-results").html(e.response.data);admin_window_run_on_load("add_account_listeners")}}});return false}function search_accounts(){$(".search-form").submit(function(e){e.preventDefault();search_accounts_next_page(1)})}function create_account(){$(".new-account-form").submit(function(e){e.preventDefault();$("#theamus-accounts").scrollTop(0);$("#create-account-result").html(Theamus.Notify("spinner","Creating..."));Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","create_new_account"],data:{form:this},success:function(e){if(e.error.status===1){$("#create-account-result").html(Theamus.Notify("danger",e.error.message))}else if(e.response.data===true){$("#create-account-result").html(Theamus.Notify("success","Account created successfully."));setTimeout(function(){update_admin_window_content("theamus-accounts","/accounts/admin/");change_admin_window_title("theamus-accounts","Theamus Accounts")},1500)}}})})}function edit_account(){$('[name="change_password"]').click(function(e){this.checked===true?$("#password-group").show():$("#password-group").hide()});$(".edit-account-form").submit(function(e){e.preventDefault();$("#theamus-accounts").scrollTop(0);$("#edit-account-result").html(alert_notify("spinner","Saving..."));Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/admin/save-account",method:["Accounts","save_account_information"],data:{form:this},success:function(e){console.log(e);if(e.error.status===1){$("#edit-account-result").html(Theamus.Notify("danger",e.error.message))}else if(e.response.data===true){$("#edit-account-result").html(Theamus.Notify("success","Account information saved."))}}})})}function remove_account(){$('[name="cancel"]').click(function(e){update_admin_window_content("theamus-accounts","/accounts/admin/");change_admin_window_title("theamus-accounts","Theamus Accounts")});$(".remove-account-form").submit(function(e){e.preventDefault();$("#theamus-accounts").scrollTop(0);$("#remove-account-result").html(alert_notify("spinner","Removing..."));Theamus.Ajax.api({type:"post",url:Theamus.base_url+"/accounts/",method:["Accounts","remove_user_account"],data:{custom:{id:$("#id").val()}},success:function(e){if(e.error.status===1){$("#remove-account-result").html(Theamus.Notify("danger",e.error.message))}else if(e.response.data===true){$("#remove-account-result").html(Theamus.Notify("success","Account information saved."));setTimeout(function(){update_admin_window_content("theamus-accounts","/accounts/admin/");change_admin_window_title("theamus-accounts","Theamus Accounts")},1500)}}})})}