function change_navigation_tab(){$('[name="navigation-tab"]').click(function(e){e.preventDefault();update_admin_window_content("theamus-navigation",$(this).attr("data-file"));change_admin_window_title("theamus-navigation",$(this).attr("data-title"))})}function list_listeners(){$('[name="edit-navigation-link"]').click(function(e){e.preventDefault();change_admin_window_title("theamus-navigation","Edit Link");update_admin_window_content("theamus-navigation","navigation/edit?id="+$(this).data("id"))});$('[name="remove-navigation-link"]').click(function(e){e.preventDefault();change_admin_window_title("theamus-navigation","Remove Link");update_admin_window_content("theamus-navigation","navigation/remove?id="+$(this).data("id"))})}function change_path(e){$("#"+$("#path-type").val()+"-wrapper").hide();$("#path-type").val(e);$("#"+e+"-wrapper").show();resize_admin_window()}function load_pages_select(){Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/navigation/",method:["Navigation","get_pages_select"],data:{custom:{page:$("#page").length>0?$("#page").val():""}},success:function(e){if(e.error.status===1){$("#page-select").html("<option>"+e.error.message+"</option>")}else{$("#page-select").html(e.response.data)}}})}function load_features_select(){Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/navigation/",method:["Navigation","get_features_select"],data:{custom:{feature:$("#feature").length>0?$("#feature").val():""}},success:function(e){if(e.error.status===1){$("#feature-select").html("<option>"+e.error.message+"</option>")}else{$("#feature-select").html(e.response.data)}}})}function load_feature_files_select(){Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/navigation/",method:["Navigation","get_feature_files_select"],data:{custom:{feature:$("#feature").length>0&&$("#feature").val()!==""?$("#feature").val():$("#feature-select").val(),file:$("#feature-file").length>0?$("#feature-file").val():""}},success:function(e){if(e.error.status===1){$("#feature-file-select").html("<option>"+e.error.message+"</option>")}else{$("#feature-file-select").html(e.response.data)}}})}function load_groups_select(){Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/navigation/",method:["Navigation","get_groups_select"],data:{custom:{groups:$("#groups").length>0?$("#groups").val():""}},success:function(e){if(e.error.status===1){$("#group-select").html("<option>"+e.error.message+"</option>")}else{$("#group-select").html(e.response.data)}}})}function get_navigation_links(e){var t=e===undefined||e%1!==0?1:e;var n=$("#navigation-search").length===0?"":$("#navigation-search").val();Theamus.Ajax.run({url:Theamus.base_url+"/navigation/links-list&search="+n+"&page="+t,result:"navigation-list",type:"include",after:function(){list_listeners()}});return false}function search_links(){$("#navigation-search-form").submit(function(e){e.preventDefault();get_navigation_links(1)})}function create_link(){$('[name="path"]').click(function(e){e.preventDefault();change_path(this.id)});$("#feature-select").change(function(){load_feature_files_select()});$("#create-link-form").submit(function(e){e.preventDefault();$("#navigation-result").html(Theamus.Notify("spinner","Creating..."));$("#theamus-navigation").scrollTop(0);$(this).find('button[type="submit"]').attr("disabled","disabled");Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/navigation/",method:["Navigation","create_link"],data:{form:this},success:function(e){if(e.error.status===1){$("#navigation-result").html(Theamus.Notify("danger",e.error.message));$("#create-link-form").find('button[type="submit"]').removeAttr("disabled")}else{$("#navigation-result").html(Theamus.Notify("success","Link created successfully."));setTimeout(function(){change_admin_window_title("theamus-navigation","Theamus Navigation");update_admin_window_content("theamus-navigation","navigation/")},1500)}}})})}function edit_link(){$('[name="path"]').click(function(e){e.preventDefault();change_path(this.id)});$("#feature-select").change(function(){load_feature_files_select()});$("#edit-link-form").submit(function(e){e.preventDefault();$("#navigation-result").html(Theamus.Notify("spinner","Saving..."));$("#theamus-navigation").scrollTop(0);$(this).find('button[type="submit"]').attr("disabled","disabled");Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/navigation/",method:["Navigation","save_link"],data:{form:this},success:function(e){$("#navigation-result").show();if(e.error.status===1){$("#navigation-result").html(Theamus.Notify("danger",e.error.message))}else{$("#navigation-result").html(Theamus.Notify("success","Saved."));setTimeout(function(){$("#navigation-result").html("").hide()},1500)}$("#edit-link-form").find('button[type="submit"]').removeAttr("disabled")}})})}function remove_link(){$("#remove-link-form").submit(function(e){e.preventDefault();$("#remove-result").html(Theamus.Notify("spinner","Removing..."));$("#theamus-navigation").scrollTop(0);$(this).find('button[type="submit"]').attr("disabled","disabled");Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/navigation/",method:["Navigation","remove_link"],data:{form:this},success:function(e){if(e.error.status===1){$("#remove-result").html(Theamus.Notify("danger",e.error.message));$("#remove-link-form").find('button[type="submit"]').removeAttr("disabled")}else{$("#remove-result").html(Theamus.Notify("success","Removed."));setTimeout(function(){change_admin_window_title("theamus-navigation","Theamus Navigation");update_admin_window_content("theamus-navigation","navigation/")},1500)}}})})}