var Sandbox=function(){return this.addDataListener(),this};Sandbox.prototype.addDataListener=function(){var e=this;return document.getElementById("addData").addEventListener("click",function(t){t.preventDefault(),e.addDataItem()}),this},Sandbox.prototype.addDataItem=function(){var e=document.createElement("div");e.classList.add("data-wrapper");var t=document.createElement("section");t.setAttribute("type","card_column"),t.classList.add("third"),e.appendChild(t);var n=document.createElement("div");n.classList.add("card_input-wrapper"),t.appendChild(n);var a=document.createElement("input");a.setAttribute("type","text"),a.setAttribute("name","key"),a.setAttribute("placeholder","key"),n.appendChild(a);var r=document.createElement("section");r.setAttribute("type","card_column"),r.style.width="60%",e.appendChild(r);var d=document.createElement("div");d.classList.add("card_input-wrapper"),r.appendChild(d);var o=document.createElement("input");o.setAttribute("type","text"),o.setAttribute("name","value"),o.setAttribute("placeholder","value"),d.appendChild(o);var i=document.createElement("a");return i.setAttribute("href","#"),i.innerHTML="<span class='glypicon ion-close'></span>",e.appendChild(i),this.deleteDataListener(i),document.getElementById("dataInformation").appendChild(e),document.getElementById("dataDefault").style.display="none",this},Sandbox.prototype.deleteDataListener=function(e){var t=this;return e.addEventListener("click",function(n){n.preventDefault(),t.deleteDataItem(e.parentNode)}),this},Sandbox.prototype.deleteDataItem=function(e){return e.parentNode.removeChild(e),0===document.querySelectorAll(".data-wrapper").length&&(document.getElementById("dataDefault").style.display="block"),this},Sandbox.prototype.loadFeatureFunctions=function(){for(var e=document.getElementById("function");e.firstChild;)e.removeChild(e.firstChild);return Theamus.Ajax.api({type:"get",url:Theamus.base_url+"/sandbox/",method:["Sandbox","get_feature_functions"],data:{custom:{feature:document.getElementById("feature").value}},success:function(t){var n=t.response.data;if(0===n.length){var a=document.createElement("option");a.innerHTML="There are no methods that can be run for this feature."}else for(var r=0;r<n.length;r++){var a=document.createElement("option");a.setAttribute("value",n[r][0]+":"+n[r][1]),a.innerHTML=n[r][0]+"->"+n[r][1],e.appendChild(a)}}}),this},Sandbox.prototype.listenFeatureFunctions=function(){var e=this;return document.getElementById("feature").addEventListener("change",function(){e.loadFeatureFunctions()}),this},Sandbox.prototype.listenSend=function(){var e=this;document.getElementById("send").addEventListener("click",function(t){t.preventDefault(),e.send()})},Sandbox.prototype.send=function(){Theamus.Style.getCard("sendinfo").addNotification("spinner","Running API request...");var e=this,t=document.getElementById("info");dataElement=document.getElementById("data"),errorElement=document.getElementById("errors"),t.innerHTML="",dataElement.innerHTML="",errorElement.innerHTML="",t.classList.remove("prettyprinted"),dataElement.classList.remove("prettyprinted"),errorElement.classList.remove("prettyprinted"),Theamus.Ajax.api({type:this.getSendType(),url:this.getURL(),method:[this.getMethodClass(),this.getMethod()],data:{custom:this.getData()},success:function(n){Theamus.Style.getCard("sendinfo").removeNotification(),console.log(n),t.innerHTML=JSON.stringify(e.getInfo(),null,2),dataElement.innerHTML=JSON.stringify(n.response.data,null,2),errorElement.innerHTML=JSON.stringify(n.error,null,2),prettyPrint()}})},Sandbox.prototype.getSendType=function(){return document.getElementById("requestType").value},Sandbox.prototype.getURL=function(){return Theamus.base_url+"/"+document.getElementById("feature").value+"/"},Sandbox.prototype.getMethod=function(){return document.getElementById("function").value.split(":")[1]},Sandbox.prototype.getMethodClass=function(){return document.getElementById("function").value.split(":")[0]},Sandbox.prototype.getData=function(){for(var e=document.querySelectorAll("[name='key']"),t=document.querySelectorAll("[name='value']"),n={},a=0;a<e.length;a++)""!==e[a].value&&(n[e[a].value]=t[a].value);return n},Sandbox.prototype.getInfo=function(){return{requestType:this.getSendType(),url:this.getURL(),method:this.getMethodClass()+"->"+this.getMethod()+"()",data:this.getData()}};